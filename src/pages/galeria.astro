---
// pages/galeria.astro - Galer√≠a con mosaico din√°mico
import Layout from '../layouts/Layout.astro';
import GalleryModal from '../components/GalleryModal.astro';

// Obtener todas las im√°genes de la carpeta public/galeria
const imageFiles = import.meta.glob('/src/pages/../../public/galeria/*.(jpg|jpeg|png|webp)', { eager: false });
const images = Object.keys(imageFiles).map((path, index) => {
  const fileName = path.split('/').pop();
  const imagePath = `/galeria/${fileName}`;
  
  // Alternar tama√±os para crear un mosaico interesante
  const sizes = ['col-span-1', 'col-span-1', 'col-span-1 md:col-span-2', 'col-span-1', 'col-span-1', 'col-span-1 md:col-span-2'];
  const size = sizes[index % sizes.length];
  
  const sports = ['F√∫tbol', 'Baloncesto', 'Voleibol', 'B√©isbol', 'Futsal', 'Softball'];
  const sport = sports[index % sports.length];
  
  return {
    id: `modal-${index + 1}`,
    image: imagePath,
    title: `Dise√±o ${sport} ${index + 1}`,
    sport: sport,
    size: size
  };
});
---

<Layout title="Galer√≠a" description="Galer√≠a de uniformes deportivos personalizados. Descubre nuestros dise√±os exclusivos y de alta calidad.">
  <!-- Header Section -->
  <section class="py-20 bg-gradient-to-br from-primary via-accent to-cyan-400 text-white relative overflow-hidden">
    <!-- Background pattern -->
    <div class="absolute inset-0 opacity-10">
      <svg class="w-full h-full" viewBox="0 0 1200 400" preserveAspectRatio="none">
        <defs>
          <pattern id="grid" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="white" stroke-width="1"/>
          </pattern>
        </defs>
        <rect width="1200" height="400" fill="url(#grid)" />
      </svg>
    </div>

    <div class="container mx-auto px-4 text-center relative z-10">
      <h1 class="text-6xl md:text-7xl font-bold mb-4">Galer√≠a de Dise√±os</h1>
      <p class="text-xl text-white/90 max-w-2xl mx-auto leading-relaxed">
        Explora nuestra colecci√≥n de uniformes personalizados. Cada dise√±o cuenta la historia √∫nica de un equipo.
      </p>
    </div>
  </section>

  <!-- Mosaico din√°mico -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {images.map((item) => (
          <div
            class="gallery-item rounded-xl overflow-hidden shadow-lg cursor-pointer group relative hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 transform"
            data-modal={item.id}
          >
            <div class="relative w-full h-64 overflow-hidden bg-gradient-to-br from-slate-100 to-slate-200">
              <img
                src={item.image}
                alt={item.title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
              />
            </div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
              <h3 class="text-white font-bold text-xl mb-2">{item.title}</h3>
              <span class="inline-block bg-accent text-white font-semibold px-4 py-2 rounded-full text-sm w-fit">{item.sport}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Modales para cada imagen -->
  {images.map((item) => (
    <GalleryModal
      id={item.id}
      image={item.image}
      title={item.title}
      sport={item.sport}
    />
  ))}

  <!-- Secci√≥n inspiracional -->
  <section class="py-20 bg-gradient-to-b from-slate-50 to-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-5xl font-bold text-slate-900 mb-4">
          <span class="bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent">
            ¬øInspirado?
          </span>
        </h2>
        <p class="text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed">
          Estos dise√±os son ejemplos de lo que podemos crear para tu equipo. Cada proyecto es completamente personalizado seg√∫n tus necesidades y visi√≥n.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="group p-8 bg-white rounded-xl border-2 border-primary/30 hover:border-primary hover:shadow-xl transition-all hover:scale-105 transform duration-300">
          <div class="text-5xl mb-4">üé®</div>
          <h3 class="text-lg font-bold text-slate-900 mb-3">Dise√±o personalizado</h3>
          <p class="text-slate-600 text-sm leading-relaxed">
            Nuestro equipo crear√° un dise√±o √∫nico que refleje la identidad de tu equipo.
          </p>
        </div>

        <div class="group p-8 bg-white rounded-xl border-2 border-accent/30 hover:border-accent hover:shadow-xl transition-all hover:scale-105 transform duration-300">
          <div class="text-5xl mb-4">üîÑ</div>
          <h3 class="text-lg font-bold text-slate-900 mb-3">Revisiones ilimitadas</h3>
          <p class="text-slate-600 text-sm leading-relaxed">
            Hasta que quedes 100% satisfecho con el dise√±o de tu uniforme.
          </p>
        </div>

        <div class="group p-8 bg-white rounded-xl border-2 border-cyan-400/30 hover:border-cyan-400 hover:shadow-xl transition-all hover:scale-105 transform duration-300">
          <div class="text-5xl mb-4">‚ö°</div>
          <h3 class="text-lg font-bold text-slate-900 mb-3">Producci√≥n r√°pida</h3>
          <p class="text-slate-600 text-sm leading-relaxed">
            Una vez aprobado el dise√±o, producimos y entregamos en tiempo r√©cord.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA final -->
  <section class="py-20 bg-gradient-to-r from-primary via-accent to-cyan-400 text-white relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
      <svg class="w-full h-full" viewBox="0 0 1200 400" preserveAspectRatio="none">
        <defs>
          <pattern id="grid-cta" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="white" stroke-width="1"/>
          </pattern>
        </defs>
        <rect width="1200" height="400" fill="url(#grid-cta)" />
      </svg>
    </div>

    <div class="container mx-auto px-4 text-center max-w-3xl relative z-10">
      <h2 class="text-5xl font-bold mb-6">
        Tu uniforme exclusivo te espera
      </h2>
      <p class="text-xl text-white/90 mb-10 leading-relaxed">
        Comienza el proceso de dise√±o hoy. Nuestro equipo te guiar√° para crear uniformes que reflejen la identidad de tu equipo.
      </p>
      <a href="/contacto" class="btn btn-lg bg-white text-primary hover:bg-gray-100 hover:shadow-xl border-0 font-bold px-8">
        Solicitar cotizaci√≥n
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path d="M2.5 3A1.5 1.5 0 001 4.5v11A1.5 1.5 0 002.5 17h15a1.5 1.5 0 001.5-1.5v-11A1.5 1.5 0 0017.5 3h-15z"></path>
        </svg>
      </a>
    </div>
  </section>
</Layout>

<script>
  document.querySelectorAll('[data-modal]').forEach(item => {
    item.addEventListener('click', () => {
      const modalId = item.getAttribute('data-modal');
      const modal = document.getElementById(modalId!) as HTMLDialogElement;
      if (modal) {
        modal.showModal();
      }
    });
  });
</script>
